Creating the run_analysis.R document
------------------------------------
First, place all necessary files into one working directory.  
  
Read in all neccessary files:
```{r}
subjectTest <- read.table("C:/Users/Kandy.WAZZABI/Desktop/R Programming/getdata-projectfiles-UCI HAR Dataset/subject_test.txt")
xTest <- read.table("C:/Users/Kandy.WAZZABI/Desktop/R Programming/getdata-projectfiles-UCI HAR Dataset/X_test.txt")
yTest <- read.table("C:/Users/Kandy.WAZZABI/Desktop/R Programming/getdata-projectfiles-UCI HAR Dataset/y_test.txt")
subjectTrain <- read.table("C:/Users/Kandy.WAZZABI/Desktop/R Programming/getdata-projectfiles-UCI HAR Dataset/subject_train.txt")
xTrain <- read.table("C:/Users/Kandy.WAZZABI/Desktop/R Programming/getdata-projectfiles-UCI HAR Dataset/X_train.txt")
yTrain <- read.table("C:/Users/Kandy.WAZZABI/Desktop/R Programming/getdata-projectfiles-UCI HAR Dataset/y_train.txt")
featuresLabels <- read.table("C:/Users/Kandy.WAZZABI/Desktop/R Programming/getdata-projectfiles-UCI HAR Dataset/features.txt", stringsAsFactors = FALSE)
```

Bind all the tables together using cbind and rbind:
```{r}
subjects <- rbind(subjectTest, subjectTrain)
activities <- rbind(yTest, yTrain)
features <- rbind(xTest, xTrain)
data <- cbind(subjects, activities, features)
```

Add column names to the data set:
```{r}
colnames(data) <- c("Subject", "Activity", featuresLabels[,2])
```

Extract on the columns that contain mean and standard deviation:
```{r}
dataExtract <- data[,c("Subject", "Activity", colnames(data)[grep("mean",colnames(data))],
                       colnames(data)[grep("std", colnames(data))])]
```


Add descriptive names to activity column:
```{r}
dataExtract$Activity[dataExtract$Activity == 1] = "Walking"
dataExtract$Activity[dataExtract$Activity == 2] = "Walking Upstairs"
dataExtract$Activity[dataExtract$Activity == 3] = "Walking Downstairs"
dataExtract$Activity[dataExtract$Activity == 4] = "Sitting"
dataExtract$Activity[dataExtract$Activity == 5] = "Standing"
dataExtract$Activity[dataExtract$Activity == 6] = "Laying"
```

Tidy up the labels by renaming them.  (I am aware there is probably a more elegant solution to this. However, I could not figure it out, so I just typed all 81 labels out.)
```{r}
colnames(dataExtract) <- c("Subject", "Activity", "tBodyAccXMean", "tBodyAccYMean",
                           "tBodyAccZMean", "tGravityAccXMean", "tGravityAccYMean",
                           "tGravityAccZMean", "tBodyAccJerkXMean", "tBodyAccJerkYMean",
                           "tBodyAccJerkZMean", "tBodyGyroXMean", "tBodyGyroYMean",
                           "tBodyGyroZMean", "tBodyGyroJerkXMean", "tBodyGyroJerkYMean",
                           "tBodyGyroJerkZMean", "tBodyAccMagMean", "tGravityAccMagMean",
                           "tBodyAccJerkMagMean", "tBodyGyroMagMean", "tBodyGyroJerkMagMean",
                           "fBodyAccXMean", "fBodyAccYMean", "fBodyAccZMean",
                           "fBodyAccXMeanFrequency", "fBodyAccYMeanFrequency",
                           "fBodyAccZMeanFrequency", "fBodyAccJerkXMean",
                           "fBodyAccJerkYMean", "fBodyAccJerkZMean",
                           "fBodyAccJerkXMeanFrequency", "fBodyAccJerkYMeanFrequency",
                           "fBodyAccJerkZMeanFrequency", "fBodyGyroXMean", "fBodyGyroYMean",
                           "fBodyZMean", "fBodyGyroXMeanFrequency",
                           "fBodyGyroYMeanFrequency", "fBodyGyroZMeanFrequency",
                           "fBodyAccMagMean", "fBodyAccMagMeanFrequency",
                           "fBodyAccJerkMagMean", "fBodyAccJerkMagMeanFrequency",
                           "fBodyGyroMagMean", "fBodyGyroMagMeanFrequency",
                           "fBodyGyroJerkMagMean", "fBodyGyroJerkMagMeanFrequency",
                           "tBodyAccXStandardDeviation", "tBodyAccYStandardDeviation",
                           "tBodyAccZStandardDeviation", "tGravityAccXStandardDeviation",
                           "tGravityAccYStandardDeviation", "tGravityAccZStandardDeviation",
                           "tBodyAccJerkXStandardDeviation", "tBodyAccJerkYStandardDeviation",
                           "tBodyAccJerkZStandardDeviation", "tBodyGyroXStandardDeviation",
                           "tBodyGyroYStandardDeviation", "tBodyGyroZStandardDeviation",
                           "tBodyGyroJerkXStandardDeviation", "tBodyGyroJerkYStandardDeviation",
                           "tBodyGyroJerkZStandardDeviation", "tBodyAccMagStandardDeviation",
                           "tGravityAccMagStandardDeviation", "tBodyAccJerkMagStandardDeviation",
                           "tBodyGyroMagStandardDeviation", "tBodyGyroJerkMagStandardDeviation",
                           "fBodyAccXStandardDeviation", "fBodyAccYStandardDeviation",
                           "fBodyAccZStandardDeviation", "fBodyAccJerkXStandardDeviation",
                           "fBodyAccJerkYStandardDeviation", "fBodyAccJerkZStandardDeviation",
                           "fBodyGyroXStandardDeviation", "fBodyGyroYStandardDeviation",
                           "fBodyGyroZStandardDeviation", "fBodyAccMagStandardDeviation",
                           "fBodyAccJerkMagStandardDeviation", "fBodyGyroMagStandardDeviation",
                           "fBodyGyroJerkMagStandardDeviation")
```

The next block of code splits the data up into 6 separate data frames based on the 6 different activities.  
Then, I used the aggregate function to create 6 new data frames that show the means of each column split by the Subject number.  
Next, I added the Activity column back into each of the 6 new data frames:

```{r}
library(dplyr)

##Data frame #1 - Activity - Walking
walkingData <- filter(dataExtract, Activity == "Walking")
walkingMeans <- aggregate(walkingData[,3:81], walkingData["Subject"],
                            function(x) mean(x))
Activity <- rep("Walking", 30)
walkingMeans <- cbind(Activity, walkingMeans)


##Data frame #2 - Activity - Walking Upstairs
walkingUpstairsData <- filter(dataExtract, Activity == "Walking Upstairs")
walkingUpstairsMeans <- aggregate(walkingUpstairsData[,3:81], walkingUpstairsData["Subject"],
                                    function(x) mean(x))
Activity <- rep("Walking Upstairs", 30)
walkingUpstairsMeans <- cbind(Activity, walkingUpstairsMeans)


##Data frame #3 - Activity - Walking Downstairs
walkingDownstairsData <- filter(dataExtract, Activity == "Walking Downstairs")
walkingDownstairsMeans <- aggregate(walkingDownstairsData[,3:81], walkingDownstairsData["Subject"],
                                    function(x) mean(x))
Activity <- rep("Walking Downstairs", 30)
walkingDownstairsMeans <- cbind(Activity, walkingDownstairsMeans)


##Data frame #4 - Activity - Sitting
sittingData <- filter(dataExtract, Activity == "Sitting")
sittingMeans <- aggregate(sittingData[,3:81], sittingData["Subject"],
                            function(x) mean(x))
Activity <- rep("Sitting", 30)
sittingMeans <- cbind(Activity, sittingMeans)


##Data frame #5 - Activity - Standing
standingData <- filter(dataExtract, Activity == "Standing")
standingMeans <- aggregate(standingData[,3:81], standingData["Subject"],
                            function(x) mean(x))
Activity <- rep("Standing", 30)
standingMeans <- cbind(Activity, standingMeans)


##Data frame #6 - Activity - Laying
layingData <- filter(dataExtract, Activity == "Laying")
layingMeans <- aggregate(layingData[,3:81], layingData["Subject"],
                            function(x) mean(x))
Activity <- rep("Laying", 30)
layingMeans <- cbind(Activity, layingMeans)
```

Combine all 6 data frames into one tidy dataset:
```{r}
tidyData <- rbind(walkingMeans, walkingDownstairsMeans, walkingUpstairsMeans, sittingMeans,
      standingMeans, layingMeans)
```

You can easily see the data is tidy if you look at the first few columns of the data frame:
```{r}
tidyData[,1:5]
```